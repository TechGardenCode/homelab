# Envoy Gateway Helm chart values
# Configure service for MetalLB LoadBalancer with static IP

service:
  type: LoadBalancer
  annotations:
    metallb.universe.tf/ip-pool: system-pool

# High Availability configuration
# Per architecture/kube-prom-operator.md: Run 3 replicas for maximum continuity
# during upgrades and single-node failures
deployment:
  replicas: 3
  envoyGateway:
    pod:
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 100
              podAffinityTerm:
                labelSelector:
                  matchExpressions:
                    - key: app.kubernetes.io/name
                      operator: In
                      values:
                        - envoy-gateway
                topologyKey: kubernetes.io/hostname

# Pod Disruption Budget: ensure at least 2 pods are available during disruptions
podDisruptionBudget:
  minAvailable: 2

config:
  envoyGateway:
    gateway:
      controllerName: gateway.envoyproxy.io/gatewayclass-controller
    logging:
      level:
        default: info
